<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>EXACT Portal</title>

    <!-- Brand font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="icon" href="data:," />

    <style>
      :root{
        --bg: #fbfbfc;
        --card: #ffffff;
        --text: #0b0b0c;
        --muted: #6b6f76;
        --line: rgba(15, 20, 25, .10);
        --shadow: 0 12px 30px rgba(15,20,25,.08);
        --radius: 14px;

        --gold: #b89a5b;
        --gold-dark: #9e8247;
        --danger: #b42318;
      }

      *, *::before, *::after { box-sizing: border-box; }

      body{
        margin:0;
        font-family: Montserrat, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        background: var(--bg);
        color: var(--text);
      }

      .container{
        max-width: 1100px;
        margin: 36px auto;
        padding: 0 18px 60px;
      }

      h1{
        font-size: 34px;
        font-weight: 700;
        letter-spacing: .6px;
        margin: 0 0 18px;
      }

.page-header{
  display: flex;
  align-items: center;
  justify-content: flex-start; /* logo on the left */
  margin-bottom: 18px;
}

.logo-link{
  display: inline-flex;
  align-items: center;
  text-decoration: none;
}

.exact-logo{
  height: 42px;
  width: auto;
  object-fit: contain;
  opacity: 0.95;
  transition: opacity .15s ease, transform .05s ease;
}

.logo-link:hover .exact-logo{ opacity: 1; }
.logo-link:active .exact-logo{ transform: translateY(1px); }

@media (max-width: 600px){
  .exact-logo{ height: 32px; }
}


      h2{
        font-size: 13px;
        font-weight: 600;
        letter-spacing: 1.4px;
        text-transform: uppercase;
        margin: 0 0 12px;
        color: var(--muted);
      }

      .topbar{
        background: #fafafa;
        border: 1px solid var(--line);
        border-radius: var(--radius);
        padding: 14px 16px;
        margin-bottom: 18px;
      }

      .row{
        display:flex;
        justify-content:space-between;
        align-items:center;
        gap: 12px;
      }

      .subtle{
        color: var(--muted);
        font-size: 12px;
      }

      .card{
        background: var(--card);
        border: 1px solid var(--line);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 16px;
        margin: 14px 0;
      }

      .appLayout{
        display: grid;
        grid-template-columns: 260px 1fr;
        gap: 14px;
      }

      @media (max-width: 840px){
        .appLayout{ grid-template-columns: 1fr; }
      }

      /* Menu */
      .menu{ position: sticky; top: 14px; }

      .menuBtn{
        width: 100%;
        text-align: left;
        padding: 11px 12px;
        border-radius: 12px;
        border: 1px solid var(--line);
        background: #fff;
        font-weight: 600;
        cursor: pointer;
        margin-bottom: 8px;
      }

      .menuBtn.active{
        border-color: rgba(184,154,91,.75);
        box-shadow: 0 16px 30px rgba(15,20,25,.10);
      }

      /* Inputs */
      input, select{
        width: 100%;
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid var(--line);
        background: #fff;
        font-size: 14px;
      }

      input:focus, select:focus{
        border-color: rgba(184,154,91,.55);
        box-shadow: 0 0 0 4px rgba(184,154,91,.18);
      }

      button{
        border: 1px solid var(--line);
        background: #fff;
        padding: 9px 12px;
        border-radius: 12px;
        font-weight: 600;
        cursor:pointer;
      }

      .btn-primary{
        background: var(--text);
        color: #fff;
        border-color: transparent;
      }

      .btn-gold{
        background: var(--gold);
        color: #fff;
        border-color: transparent;
      }

      .btn-danger{
        background: #fff;
        border-color: rgba(180,35,24,.35);
        color: var(--danger);
      }

      /* ===== CUSTOMER LIST ===== */

      .customer-list{
        display: grid;
        gap: 12px;
        padding: 10px 0;
      }

      .customer-row{
        display: grid;
        grid-template-columns: 1.6fr 1.1fr auto;
        gap: 14px;
        align-items: center;
        padding: 14px;
        border: 1px solid var(--line);
        border-radius: 14px;
        background: #fff;
        box-shadow: 0 10px 22px rgba(15,20,25,.06);
      }

      .customer-row:hover{
        border-color: rgba(184,154,91,.45);
        box-shadow: 0 14px 28px rgba(15,20,25,.08);
      }

      .customer-main .name{
        font-size: 15px;
        font-weight: 700;
      }

      .customer-main .meta{
        margin-top: 4px;
        font-size: 13px;
        color: var(--muted);
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .customer-dot{ opacity: .35; }

      .customer-context{
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .pill-soft{
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid rgba(184,154,91,.35);
        background: rgba(184,154,91,.08);
        font-size: 12px;
        color: var(--gold-dark);
      }

      .pill-soft-gold{
        border-color: rgba(184,154,91,.55);
        background: rgba(184,154,91,.14);
      }

      .customer-actions{
        display: inline-flex;
        gap: 10px;
        justify-content: flex-end;
      }

      .customer-actions .btn-primary,
      .customer-actions .btn-danger{
        padding: 8px 12px;
        border-radius: 12px;
        font-size: 13px;
      }

      @media (max-width: 768px){
        .customer-row{
          grid-template-columns: 1fr;
          gap: 10px;
        }
        .customer-actions{ justify-content: flex-start; }
      }

      /* ===== VALIDATION (ACCESSIBLE) ===== */

      .field-error{
        border-color: #c9a24a !important;
        box-shadow: 0 0 0 1px #c9a24a, inset 4px 0 0 #c9a24a;
        background: rgba(201,162,74,.08) !important;
        background-image: linear-gradient(to right, #c9a24a 4px, transparent 4px);
        background-repeat: no-repeat;
      }

      .field-ok{
        border-color: #5b7c99 !important;
        box-shadow: 0 0 0 1px #5b7c99, inset 4px 0 0 #5b7c99;
        background: rgba(91,124,153,.05) !important;
        background-image: linear-gradient(to right, #5b7c99 4px, transparent 4px);
        background-repeat: no-repeat;
      }

      /* Dialog */
      dialog{
        border: 1px solid var(--line);
        border-radius: 16px;
        box-shadow: 0 28px 70px rgba(15,20,25,.22);
        padding: 16px;
        width: min(520px, calc(100vw - 26px));
      }

      dialog::backdrop{ background: rgba(10,10,12,.55); }
    </style>
  </head>

  <body>
   <div class="page-header">
  <a href="./" class="logo-link" aria-label="EXACT Portal home">
    <img src="assets/logo.png" alt="EXACT Cosmetics" class="exact-logo">
  </a>
</div>

      <div id="topBar" class="topbar" style="display:none;">
        <div class="row">
          <div>
            <div id="topBarTitle" style="font-weight:600;"></div>
            <div class="subtle" id="topBarSub"></div>
          </div>
          <button id="logoutBtn">Logout</button>
        </div>
      </div>

      <div id="loginBox" class="card" style="max-width:480px;">
        <h2>Login</h2>
        <input id="email" placeholder="Email" />
        <input id="password" type="password" placeholder="Password" style="margin-top:10px;" />
        <button id="loginBtn" class="btn-primary" style="margin-top:10px;">Login</button>
        <p id="authMsg"></p>
      </div>

      <div id="appBox" style="display:none;">
        <div class="appLayout">
          <div class="card menu">
            <h2>Menu</h2>
            <div id="menuItems"></div>
          </div>

          <div>
            <div id="viewCustomerMgmt" class="card" style="display:none;">
              <div id="adminAgentPicker" style="display:none; margin-bottom:14px;">
                <label>Insert as clinic</label>
                <select id="agentSelect"></select>
              </div>

              <h2>Customer Management</h2>

              <button id="openAddCustomerBtn" class="btn-gold">Add customer</button>
              <button id="cancelAddCustomerBtn" style="display:none;">Cancel</button>
              <p id="custMsg"></p>

              <div id="addCustomerPanel" style="display:none;">
                <input id="firstName" placeholder="First name" />
                <input id="lastName" placeholder="Last name" style="margin-top:10px;" />
                <input id="custEmail" placeholder="Email (optional)" style="margin-top:10px;" />
                <input id="custPhone" placeholder="Phone (optional)" style="margin-top:10px;" />
                <button id="addCustomerBtn" class="btn-primary" style="margin-top:10px;">Save customer</button>
              </div>

              <div id="customerList" class="customer-list"></div>
            </div>
          </div>
        </div>
      </div>

      <dialog id="confirmDialog">
        <p id="confirmDialogText"></p>
        <button id="confirmCancelBtn">Cancel</button>
        <button id="confirmOkBtn" class="btn-danger">Delete</button>
      </dialog>

      <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
      <script src="./app.js?v=28"></script>
    </div>
  </body>
</html>
